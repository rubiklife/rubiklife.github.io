---
title: "ç«å®çŸ­å‰§ä½¿ç”¨æ‰‹å†Œï¼šAIé©±åŠ¨çš„ä¸€ç«™å¼çŸ­å‰§åˆ¶ä½œå¹³å°å®Œå…¨æŒ‡å—"
date: 2026-02-03T10:00:00+08:00
categories:
  - AIå·¥å…·
tags:
  - AI
  - çŸ­å‰§åˆ¶ä½œ
  - è§†é¢‘ç”Ÿæˆ
  - ç«å®çŸ­å‰§
  - Docker
  - Vue3
  - Go
toc: true
toc_label: "ç›®å½•"
toc_icon: "video"
mermaid: true
excerpt: "ç«å®çŸ­å‰§ - åŸºäº AI çš„ä¸€ç«™å¼çŸ­å‰§ç”Ÿæˆå¹³å°ä½¿ç”¨æ‰‹å†Œã€‚ä»å®‰è£…é…ç½®åˆ°å®Œæ•´çŸ­å‰§åˆ¶ä½œï¼Œä¸€å¥è¯ç”ŸæˆçŸ­å‰§ï¼Œä»å‰§æœ¬åˆ°æˆç‰‡å…¨è‡ªåŠ¨åŒ–ã€‚æ”¯æŒ Docker éƒ¨ç½²ã€å¤š AI æœåŠ¡å•†é›†æˆã€‚"
---

## é¡¹ç›®ç®€ä»‹

**ç«å®çŸ­å‰§ï¼ˆHuobao Dramaï¼‰** æ˜¯ä¸€ä¸ªåŸºäº AI çš„ä¸€ç«™å¼çŸ­å‰§ç”Ÿæˆå¹³å°ï¼Œèƒ½å¤Ÿå®ç°"ä¸€å¥è¯ç”Ÿæˆå®Œæ•´çŸ­å‰§"çš„å…¨è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ã€‚ä»å‰§æœ¬åˆ›ä½œåˆ°è§’è‰²å›¾åƒç”Ÿæˆï¼Œä»åˆ†é•œè„šæœ¬åˆ°æœ€ç»ˆè§†é¢‘åˆæˆï¼Œæ•´ä¸ªè¿‡ç¨‹æ— ç¼è¡”æ¥ï¼Œå¤§å¹…é™ä½çŸ­å‰§åˆ¶ä½œé—¨æ§›ã€‚

```mermaid
mindmap
  root((ç«å®çŸ­å‰§))
    æ ¸å¿ƒåŠŸèƒ½
      ä¸€å¥è¯ç”ŸæˆçŸ­å‰§
      AIå‰§æœ¬åˆ›ä½œ
      è§’è‰²å›¾åƒç”Ÿæˆ
      åœºæ™¯å›¾åƒç”Ÿæˆ
      åˆ†é•œè‡ªåŠ¨æ‹†è§£
      è§†é¢‘è‡ªåŠ¨ç”Ÿæˆ
      æ—¶é—´è½´ç¼–è¾‘
    æŠ€æœ¯æ¶æ„
      åç«¯Goè¯­è¨€
      å‰ç«¯Vue3
      æ•°æ®åº“SQLite
      è§†é¢‘å¤„ç†FFmpeg
      AIé›†æˆå¤šæœåŠ¡å•†
    éƒ¨ç½²æ–¹å¼
      Dockeréƒ¨ç½²
      äºŒè¿›åˆ¶éƒ¨ç½²
      å¼€å‘æ¨¡å¼
    AIæ”¯æŒ
      OpenAI GPT/DALL-E
      Chatfire API
      è±†åŒ…/ç«å±±å¼•æ“
      Gemini
      è‡ªå®šä¹‰æ¨¡å‹
    å·¥ä½œæµç¨‹
      Stage0å‰§æœ¬åˆ›ä½œ
      Stage1å›¾åƒç”Ÿæˆ
      Stage2åˆ†é•œæ‹†è§£
      Stage3ä¸“ä¸šç¼–è¾‘
```

### é¡¹ç›®ç‰¹è‰²

âœ¨ **å…¨æµç¨‹è‡ªåŠ¨åŒ–**
- ä»å‰§æœ¬åˆ°æˆç‰‡å…¨éƒ¨è‡ªåŠ¨åŒ–å¤„ç†
- AI é©±åŠ¨çš„è§’è‰²ä¸åœºæ™¯æå–
- æ™ºèƒ½åˆ†é•œè„šæœ¬ç”Ÿæˆ
- æ‰¹é‡å›¾åƒä¸è§†é¢‘ç”Ÿæˆ

ğŸ¨ **ä¸“ä¸šçº§åˆ¶ä½œå·¥å…·**
- å¯è§†åŒ–æ—¶é—´è½´ç¼–è¾‘å™¨
- æ”¯æŒåˆ†é•œçº§åˆ«çš„ç²¾ç»†è°ƒæ•´
- å¤šç§é•œå¤´ç±»å‹ä¸è¿åŠ¨æ•ˆæœ
- è§†é¢‘è½¬åœºä¸ç‰¹æ•ˆæ”¯æŒ

ğŸ”Œ **çµæ´»çš„ AI é›†æˆ**
- æ”¯æŒå¤šç§ AI æœåŠ¡æä¾›å•†
- ä¼˜å…ˆçº§æœºåˆ¶å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»
- ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç•Œé¢
- å¯è‡ªå®šä¹‰æ¨¡å‹é€‰æ‹©

ğŸ“¦ **å¼€ç®±å³ç”¨**
- Docker ä¸€é”®éƒ¨ç½²
- å†…ç½® SQLite æ•°æ®åº“
- å“åº”å¼ Web ç•Œé¢
- æ”¯æŒæš—é»‘/æ˜äº®ä¸»é¢˜

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚ - Vue3"
        A1[DramaList.vue<br/>é¡¹ç›®ç®¡ç†]
        A2[DramaManagement.vue<br/>å‰§é›†ç®¡ç†]
        A3[EpisodeWorkflow.vue<br/>ä¸‰é˜¶æ®µå‘å¯¼]
        A4[ProfessionalEditor.vue<br/>ä¸“ä¸šç¼–è¾‘å™¨]
        A5[AIConfig.vue<br/>AIé…ç½®]
    end

    subgraph "APIå±‚ - Gin"
        B1[drama_handler<br/>å‰§æœ¬æ¥å£]
        B2[video_handler<br/>è§†é¢‘æ¥å£]
        B3[image_handler<br/>å›¾åƒæ¥å£]
        B4[ai_handler<br/>AIé…ç½®æ¥å£]
    end

    subgraph "ä¸šåŠ¡å±‚ - Services"
        C1[DramaService<br/>å‰§æœ¬ä¸šåŠ¡é€»è¾‘]
        C2[VideoGenerationService<br/>è§†é¢‘ç”ŸæˆæœåŠ¡]
        C3[ImageGenerationService<br/>å›¾åƒç”ŸæˆæœåŠ¡]
        C4[AIService<br/>AIæœåŠ¡ç®¡ç†]
    end

    subgraph "é¢†åŸŸå±‚ - Models"
        D1[Drama<br/>çŸ­å‰§]
        D2[Episode<br/>å‰§é›†]
        D3[Character<br/>è§’è‰²]
        D4[Scene<br/>åœºæ™¯]
        D5[Storyboard<br/>åˆ†é•œ]
    end

    subgraph "åŸºç¡€è®¾æ–½å±‚"
        E1[GORM + SQLite<br/>æ•°æ®æŒä¹…åŒ–]
        E2[LocalStorage<br/>æ–‡ä»¶å­˜å‚¨]
        E3[FFmpeg<br/>è§†é¢‘å¤„ç†]
        E4[AI Clients<br/>AIæ¥å£å®¢æˆ·ç«¯]
    end

    subgraph "å¤–éƒ¨æœåŠ¡"
        F1[OpenAI<br/>GPT-4/DALL-E/Sora]
        F2[Chatfire<br/>å¤šæ¨¡å‹ç½‘å…³]
        F3[è±†åŒ…<br/>Seedanceè§†é¢‘]
        F4[Gemini<br/>Google AI]
    end

    A1 & A2 & A3 & A4 & A5 --> B1 & B2 & B3 & B4
    B1 & B2 & B3 & B4 --> C1 & C2 & C3 & C4
    C1 & C2 & C3 & C4 --> D1 & D2 & D3 & D4 & D5
    D1 & D2 & D3 & D4 & D5 --> E1
    C2 & C3 --> E2 & E3
    C4 --> E4
    E4 --> F1 & F2 & F3 & F4
```

### æŠ€æœ¯æ ˆ

#### åç«¯æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **è¯­è¨€** | Go | 1.23+ | æ ¸å¿ƒè¿è¡Œæ—¶ |
| **Webæ¡†æ¶** | Gin | 1.9+ | REST APIæœåŠ¡å™¨ |
| **ORM** | GORM | æœ€æ–°ç‰ˆ | æ•°æ®åº“æŠ½è±¡å±‚ |
| **æ•°æ®åº“** | SQLite | 3.x | æ•°æ®æŒä¹…åŒ– |
| **æ—¥å¿—** | Zap | æœ€æ–°ç‰ˆ | ç»“æ„åŒ–æ—¥å¿— |
| **è§†é¢‘å¤„ç†** | FFmpeg | 4.0+ | è§†é¢‘åˆå¹¶/å‰ªè¾‘ |

#### å‰ç«¯æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ¡†æ¶** | Vue | 3.4+ | å“åº”å¼UI |
| **è¯­è¨€** | TypeScript | 5+ | ç±»å‹å®‰å…¨ |
| **æ„å»ºå·¥å…·** | Vite | 5 | å¼€å‘æœåŠ¡å™¨ä¸æ‰“åŒ… |
| **UIç»„ä»¶** | Element Plus | æœ€æ–°ç‰ˆ | ç»„ä»¶åº“ |
| **CSSæ¡†æ¶** | TailwindCSS | æœ€æ–°ç‰ˆ | æ ·å¼å·¥å…· |
| **çŠ¶æ€ç®¡ç†** | Pinia | æœ€æ–°ç‰ˆ | é›†ä¸­çŠ¶æ€ç®¡ç† |
| **è·¯ç”±** | Vue Router | 4 | å®¢æˆ·ç«¯è·¯ç”± |

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

| ä¾èµ–é¡¹ | ç‰ˆæœ¬ | ç”¨é€” | å¿…éœ€æ€§ |
|--------|------|------|--------|
| **FFmpeg** | 4.0+ | è§†é¢‘å¤„ç†ä¸åˆå¹¶ | æ‰€æœ‰éƒ¨ç½²æ–¹å¼ |
| **Docker** | 20.10+ | å®¹å™¨è¿è¡Œæ—¶ | Dockeréƒ¨ç½² |
| **Go** | 1.23+ | åç«¯ç¼–è¯‘ | æºç ç¼–è¯‘ |
| **Node.js** | 18+ | å‰ç«¯æ„å»º | æºç ç¼–è¯‘ |

### Docker å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

Docker æ˜¯æœ€å¿«æ·çš„éƒ¨ç½²æ–¹å¼ï¼Œ2åˆ†é’Ÿå³å¯å¯åŠ¨å®Œæ•´ç³»ç»Ÿã€‚

```mermaid
graph LR
    A[æ‹‰å–é•œåƒ] --> B[å¯åŠ¨å®¹å™¨]
    B --> C[è®¿é—®Webç•Œé¢]
    C --> D[é…ç½®AIæœåŠ¡]
    D --> E[å¼€å§‹åˆ›ä½œ]
    
    style A fill:#e1f5ff
    style E fill:#c8e6c9
```

#### 1. ä½¿ç”¨ docker-composeï¼ˆæœ€ç®€å•ï¼‰

```bash
# ä¸‹è½½ docker-compose.yml
curl -O https://raw.githubusercontent.com/chatfire-AI/huobao-drama/master/docker-compose.yml

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 2. ä½¿ç”¨ docker run

```bash
# æ‹‰å–å¹¶è¿è¡Œå®¹å™¨
docker run -d \
  --name huobao-drama \
  -p 5678:5678 \
  -v huobao-data:/app/data \
  --restart unless-stopped \
  huobao/huobao-drama:latest

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker ps | grep huobao-drama

# æŸ¥çœ‹æ—¥å¿—
docker logs -f huobao-drama
```

#### 3. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:5678/health

# æ£€æŸ¥APIå¯ç”¨æ€§
curl http://localhost:5678/api/v1/dramas
```

**é¢„æœŸè¾“å‡ºï¼š**
- Health ç«¯ç‚¹ï¼š`200 OK`
- Dramas ç«¯ç‚¹ï¼š`[]`ï¼ˆç©ºæ•°ç»„ï¼Œè¡¨ç¤ºå°šæœªåˆ›å»ºé¡¹ç›®ï¼‰

#### 4. è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5678`

ä½ å°†çœ‹åˆ°ç«å®çŸ­å‰§çš„ä¸»ç•Œé¢ã€‚

### é…ç½® AI æœåŠ¡

åœ¨å¼€å§‹åˆ›ä½œå‰ï¼Œéœ€è¦é…ç½®è‡³å°‘ä¸€ä¸ª AI æœåŠ¡æä¾›å•†ã€‚

```mermaid
graph TB
    A[è®¿é—®AIé…ç½®é¡µé¢] --> B{é€‰æ‹©æœåŠ¡ç±»å‹}
    B -->|æ–‡æœ¬ç”Ÿæˆ| C[é…ç½®GPT-4ç­‰]
    B -->|å›¾åƒç”Ÿæˆ| D[é…ç½®DALL-Eç­‰]
    B -->|è§†é¢‘ç”Ÿæˆ| E[é…ç½®Soraç­‰]
    
    C & D & E --> F[å¡«å†™APIå¯†é’¥]
    F --> G[æµ‹è¯•è¿æ¥]
    G -->|æˆåŠŸ| H[å¯ç”¨æœåŠ¡]
    G -->|å¤±è´¥| I[æ£€æŸ¥é…ç½®]
    I --> F
    
    style H fill:#c8e6c9
    style I fill:#ffcdd2
```

#### é…ç½®æ­¥éª¤

1. **è¿›å…¥é…ç½®é¡µé¢**
   - ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„"è®¾ç½®"æŒ‰é’®
   - é€‰æ‹©"AIæœåŠ¡é…ç½®"

2. **é€‰æ‹©æœåŠ¡ç±»å‹**
   - **æ–‡æœ¬ç”Ÿæˆ**ï¼šç”¨äºå‰§æœ¬è§£æã€è§’è‰²æå–ã€åˆ†é•œæ‹†è§£
   - **å›¾åƒç”Ÿæˆ**ï¼šç”¨äºè§’è‰²è‚–åƒå’Œåœºæ™¯èƒŒæ™¯
   - **è§†é¢‘ç”Ÿæˆ**ï¼šç”¨äºåˆ†é•œè§†é¢‘ç”Ÿæˆ

3. **æ·»åŠ é…ç½®**
   - ç‚¹å‡»"æ·»åŠ é…ç½®"æŒ‰é’®
   - é€‰æ‹©æä¾›å•†ï¼ˆOpenAIã€Chatfireã€è±†åŒ…ç­‰ï¼‰
   - å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **æä¾›å•†** | AIæœåŠ¡å•†åç§° | `openai` |
| **æ¨¡å‹** | å¯ç”¨æ¨¡å‹åˆ—è¡¨ï¼ˆJSONæ•°ç»„ï¼‰ | `["gpt-4", "gpt-4-turbo"]` |
| **APIå¯†é’¥** | æœåŠ¡å•†æä¾›çš„å¯†é’¥ | `sk-...` |
| **Base URL** | APIç«¯ç‚¹åœ°å€ | `https://api.openai.com/v1` |
| **ä¼˜å…ˆçº§** | æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ | `1` |

4. **æµ‹è¯•è¿æ¥**
   - ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
   - ç¡®è®¤é…ç½®æœ‰æ•ˆ

5. **å¯ç”¨æœåŠ¡**
   - åˆ‡æ¢"å¯ç”¨"å¼€å…³
   - ä¿å­˜é…ç½®

#### æœ€å°é…ç½®è¦æ±‚

```mermaid
graph LR
    A[æ–‡æœ¬ç”ŸæˆæœåŠ¡<br/>è‡³å°‘1ä¸ª] 
    B[å›¾åƒç”ŸæˆæœåŠ¡<br/>è‡³å°‘1ä¸ª] 
    C[è§†é¢‘ç”ŸæˆæœåŠ¡<br/>è‡³å°‘1ä¸ª]
    
    A & B & C --> D[å®Œæ•´åŠŸèƒ½]
    
    style D fill:#c8e6c9
```

**æ¨èé…ç½®ç»„åˆï¼š**

- **æ–‡æœ¬ç”Ÿæˆ**ï¼šOpenAI GPT-4 æˆ– Chatfireï¼ˆæ”¯æŒå¤šæ¨¡å‹ï¼‰
- **å›¾åƒç”Ÿæˆ**ï¼šOpenAI DALL-E-3 æˆ– Midjourney
- **è§†é¢‘ç”Ÿæˆ**ï¼šè±†åŒ… Seedance æˆ– OpenAI Sora

## çŸ­å‰§åˆ¶ä½œå·¥ä½œæµ

ç«å®çŸ­å‰§é‡‡ç”¨å››é˜¶æ®µçº¿æ€§å·¥ä½œæµç¨‹ï¼Œæ¯ä¸ªé˜¶æ®µå¿…é¡»å®Œæˆåæ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼Œç¡®ä¿æ•°æ®è´¨é‡å’Œä¸€è‡´æ€§ã€‚

```mermaid
graph LR
    A[Stage 0<br/>å‰§æœ¬ä¸å®ä½“æå–] --> B[Stage 1<br/>å›¾åƒç”Ÿæˆ]
    B --> C[Stage 2<br/>åˆ†é•œæ‹†è§£]
    C --> D[Stage 3<br/>ä¸“ä¸šç¼–è¾‘]
    D --> E[æœ€ç»ˆè§†é¢‘]
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e9
    style D fill:#fff3e0
    style E fill:#c8e6c9
```

### Stage 0: å‰§æœ¬ä¸å®ä½“æå–

è¿™æ˜¯åˆ›ä½œçš„èµ·ç‚¹ï¼Œæ”¯æŒ AI ç”Ÿæˆæˆ–æ‰‹åŠ¨ä¸Šä¼ å‰§æœ¬ã€‚

```mermaid
graph TB
    A[åˆ›å»ºå‰§é›†] --> B{é€‰æ‹©å‰§æœ¬æ¥æº}
    B -->|AIç”Ÿæˆ| C[è¾“å…¥ä¸€å¥è¯ä¸»é¢˜]
    B -->|æ‰‹åŠ¨ä¸Šä¼ | D[ç²˜è´´å‰§æœ¬æ–‡æœ¬]
    
    C --> E[AIç”Ÿæˆå®Œæ•´å‰§æœ¬]
    D --> F[ä¿å­˜å‰§æœ¬å†…å®¹]
    E --> F
    
    F --> G[æå–è§’è‰²ä¿¡æ¯]
    F --> H[æå–åœºæ™¯ä¿¡æ¯]
    
    G & H --> I[å®ŒæˆStage 0]
    
    style C fill:#e3f2fd
    style D fill:#f3e5f5
    style I fill:#c8e6c9
```

#### æ“ä½œæ­¥éª¤

1. **åˆ›å»ºçŸ­å‰§é¡¹ç›®**
   ```
   - åœ¨ä¸»é¡µç‚¹å‡»"åˆ›å»ºé¡¹ç›®"
   - å¡«å†™çŸ­å‰§æ ‡é¢˜å’Œæè¿°
   - ç‚¹å‡»"ç¡®è®¤"
   ```

2. **åˆ›å»ºå‰§é›†**
   ```
   - è¿›å…¥çŸ­å‰§è¯¦æƒ…é¡µ
   - åœ¨"å‰§é›†ç®¡ç†"æ ‡ç­¾é¡µç‚¹å‡»"åˆ›å»ºå‰§é›†"
   - é€‰æ‹©å‰§é›†ç¼–å·
   ```

3. **AI ç”Ÿæˆå‰§æœ¬**
   ```
   - é€‰æ‹©"AIç”Ÿæˆ"é€‰é¡¹
   - è¾“å…¥ä¸»é¢˜ï¼Œä¾‹å¦‚ï¼š"ä¸€ä¸ªç¨‹åºå‘˜ç©¿è¶Šåˆ°å¤ä»£æˆä¸ºçŠ¶å…ƒçš„æ•…äº‹"
   - é€‰æ‹©æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ GPT-4ï¼‰
   - ç‚¹å‡»"ç”Ÿæˆå‰§æœ¬"
   - ç­‰å¾… AI ç”Ÿæˆå®Œæ•´å‰§æœ¬å†…å®¹
   ```

4. **æˆ–ä¸Šä¼ ç°æœ‰å‰§æœ¬**
   ```
   - é€‰æ‹©"ä¸Šä¼ å‰§æœ¬"é€‰é¡¹
   - åœ¨æ–‡æœ¬æ¡†ä¸­ç²˜è´´å‰§æœ¬å†…å®¹
   - ç‚¹å‡»"ä¿å­˜"
   ```

5. **æå–è§’è‰²ä¸åœºæ™¯**
   ```
   - ç‚¹å‡»"æå–è§’è‰²å’Œåœºæ™¯"æŒ‰é’®
   - AI ä¼šè‡ªåŠ¨åˆ†æå‰§æœ¬
   - æå–å‡ºæ‰€æœ‰è§’è‰²ä¿¡æ¯ï¼ˆå§“åã€æè¿°ã€æ€§åˆ«ç­‰ï¼‰
   - æå–å‡ºæ‰€æœ‰åœºæ™¯ä¿¡æ¯ï¼ˆä½ç½®ã€æ—¶é—´ã€æè¿°ç­‰ï¼‰
   ```

#### æ•°æ®ç»“æ„

æå–åçš„æ•°æ®åŒ…æ‹¬ï¼š

**è§’è‰²ï¼ˆCharacterï¼‰ï¼š**
- å§“å
- è§’è‰²æè¿°
- å¤–è²Œç‰¹å¾
- æ€§åˆ«
- å¹´é¾„

**åœºæ™¯ï¼ˆSceneï¼‰ï¼š**
- åœºæ™¯ä½ç½®
- æ—¶é—´ï¼ˆç™½å¤©/å¤œæ™šï¼‰
- åœºæ™¯æè¿°
- æ°›å›´

#### çŠ¶æ€éªŒè¯

å®Œæˆæ­¤é˜¶æ®µåï¼Œä½ å°†çœ‹åˆ°ï¼š
- âœ… å‰§æœ¬å†…å®¹å·²ä¿å­˜
- âœ… è§’è‰²åˆ—è¡¨å·²ç”Ÿæˆï¼ˆå¦‚ï¼šä¸»è§’ã€é…è§’ç­‰ï¼‰
- âœ… åœºæ™¯åˆ—è¡¨å·²ç”Ÿæˆï¼ˆå¦‚ï¼šçš‡å®«å¤§æ®¿ã€ä¹¦æˆ¿ç­‰ï¼‰

### Stage 1: å›¾åƒç”Ÿæˆ

ä¸ºæ¯ä¸ªè§’è‰²å’Œåœºæ™¯ç”Ÿæˆè§†è§‰ç´ æã€‚

```mermaid
graph TB
    A[å¼€å§‹Stage 1] --> B[é€‰æ‹©è§’è‰²]
    A --> C[é€‰æ‹©åœºæ™¯]
    
    B --> D{ç”Ÿæˆæ–¹å¼}
    D -->|å•ä¸ªç”Ÿæˆ| E[ç‚¹å‡»è§’è‰²å¡ç‰‡]
    D -->|æ‰¹é‡ç”Ÿæˆ| F[å‹¾é€‰å¤šä¸ªè§’è‰²]
    
    C --> G{ç”Ÿæˆæ–¹å¼}
    G -->|å•ä¸ªç”Ÿæˆ| H[ç‚¹å‡»åœºæ™¯å¡ç‰‡]
    G -->|æ‰¹é‡ç”Ÿæˆ| I[å‹¾é€‰å¤šä¸ªåœºæ™¯]
    
    E & F --> J[é€‰æ‹©å›¾åƒæ¨¡å‹]
    H & I --> J
    
    J --> K[æäº¤ç”Ÿæˆä»»åŠ¡]
    K --> L[è½®è¯¢ä»»åŠ¡çŠ¶æ€<br/>æ¯6ç§’æ£€æŸ¥ä¸€æ¬¡]
    
    L -->|å¤„ç†ä¸­| L
    L -->|å®Œæˆ| M[æ˜¾ç¤ºç”Ÿæˆå›¾åƒ]
    L -->|å¤±è´¥| N[ç‚¹å‡»é‡æ–°ç”Ÿæˆ]
    
    M --> O{æ‰€æœ‰å›¾åƒå®Œæˆ?}
    O -->|å¦| B
    O -->|æ˜¯| P[è¿›å…¥Stage 2]
    
    style M fill:#c8e6c9
    style N fill:#ffcdd2
    style P fill:#c8e6c9
```

#### æ“ä½œæ­¥éª¤

1. **å•ä¸ªè§’è‰²å›¾åƒç”Ÿæˆ**
   ```
   - åœ¨è§’è‰²å¡ç‰‡ä¸Šç‚¹å‡»"ç”Ÿæˆå›¾åƒ"æŒ‰é’®
   - é€‰æ‹©å›¾åƒç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ DALL-E-3ï¼‰
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®è§’è‰²æè¿°ç”Ÿæˆ Prompt
   - ç­‰å¾…ç”Ÿæˆå®Œæˆï¼ˆé€šå¸¸ 10-30 ç§’ï¼‰
   ```

2. **æ‰¹é‡è§’è‰²å›¾åƒç”Ÿæˆ**
   ```
   - å‹¾é€‰å¤šä¸ªè§’è‰²çš„å¤é€‰æ¡†
   - æˆ–ç‚¹å‡»"å…¨é€‰"æŒ‰é’®
   - ç‚¹å‡»"æ‰¹é‡ç”Ÿæˆè§’è‰²å›¾åƒ"æŒ‰é’®
   - é€‰æ‹©æ¨¡å‹
   - æ‰€æœ‰é€‰ä¸­çš„è§’è‰²å°†ä¾æ¬¡ç”Ÿæˆ
   ```

3. **åœºæ™¯å›¾åƒç”Ÿæˆ**
   ```
   - æ“ä½œä¸è§’è‰²ç”Ÿæˆç±»ä¼¼
   - åœ¨"åœºæ™¯"åŒºåŸŸé€‰æ‹©åœºæ™¯
   - å•ä¸ªæˆ–æ‰¹é‡ç”Ÿæˆ
   ```

#### ç”ŸæˆçŠ¶æ€è¯´æ˜

| çŠ¶æ€ | æ ‡è¯† | è¯´æ˜ |
|------|------|------|
| **å¾…ç”Ÿæˆ** | ç°è‰²å ä½ç¬¦ | å°šæœªæäº¤ç”Ÿæˆä»»åŠ¡ |
| **æ’é˜Ÿä¸­** | æ©™è‰²æ ‡ç­¾+æ—‹è½¬å›¾æ ‡ | ä»»åŠ¡å·²æäº¤ï¼Œç­‰å¾…å¤„ç† |
| **å¤„ç†ä¸­** | æ©™è‰²æ ‡ç­¾+æ—‹è½¬å›¾æ ‡ | AI æ­£åœ¨ç”Ÿæˆå›¾åƒ |
| **å·²å®Œæˆ** | æ˜¾ç¤ºå›¾åƒ | ç”ŸæˆæˆåŠŸï¼Œå›¾åƒå¯ç”¨ |
| **å¤±è´¥** | çº¢è‰²é”™è¯¯å›¾æ ‡ | ç”Ÿæˆå¤±è´¥ï¼Œå¯ç‚¹å‡»é‡è¯• |

#### è½®è¯¢æœºåˆ¶

ç³»ç»Ÿä½¿ç”¨è‡ªåŠ¨è½®è¯¢æœºåˆ¶æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼š
- **è½®è¯¢é—´éš”**ï¼š6 ç§’
- **æœ€å¤§å°è¯•æ¬¡æ•°**ï¼š100 æ¬¡
- **è¶…æ—¶æ—¶é—´**ï¼š10 åˆ†é’Ÿ

```mermaid
sequenceDiagram
    participant UI as ç”¨æˆ·ç•Œé¢
    participant API as åç«¯API
    participant AI as AIæœåŠ¡
    
    UI->>API: æäº¤ç”Ÿæˆè¯·æ±‚
    API->>AI: è°ƒç”¨å›¾åƒç”ŸæˆAPI
    API-->>UI: è¿”å›ä»»åŠ¡ID
    
    loop æ¯6ç§’è½®è¯¢
        UI->>API: æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€(task_id)
        API-->>UI: è¿”å›çŠ¶æ€
        
        alt çŠ¶æ€=å®Œæˆ
            UI->>UI: æ˜¾ç¤ºå›¾åƒ
        else çŠ¶æ€=å¤±è´¥
            UI->>UI: æ˜¾ç¤ºé”™è¯¯
        else çŠ¶æ€=å¤„ç†ä¸­
            UI->>UI: ç»§ç»­ç­‰å¾…
        end
    end
```

#### æ³¨æ„äº‹é¡¹

- âš ï¸ å¿…é¡»æ‰€æœ‰è§’è‰²å’Œåœºæ™¯éƒ½æœ‰å›¾åƒæ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
- ğŸ’¡ å¯ä»¥éšæ—¶ä¿®æ”¹è§’è‰²æè¿°åé‡æ–°ç”Ÿæˆ
- ğŸ”„ ç”Ÿæˆå¤±è´¥çš„å›¾åƒå¯ä»¥ç‚¹å‡»å¡ç‰‡é‡è¯•
- ğŸ“¦ ç”Ÿæˆçš„å›¾åƒä¼šè‡ªåŠ¨ç¼“å­˜åˆ°æœ¬åœ°å­˜å‚¨

### Stage 2: åˆ†é•œæ‹†è§£

AI è‡ªåŠ¨å°†å‰§æœ¬æ‹†è§£ä¸ºè¯¦ç»†çš„åˆ†é•œè„šæœ¬ã€‚

```mermaid
graph TB
    A[å¼€å§‹Stage 2] --> B[ç‚¹å‡»AIè‡ªåŠ¨æ‹†åˆ†]
    B --> C[é€‰æ‹©æ–‡æœ¬æ¨¡å‹]
    C --> D[æäº¤æ‹†åˆ†ä»»åŠ¡]
    
    D --> E[AIåˆ†æå‰§æœ¬]
    E --> F[ç”Ÿæˆåˆ†é•œè„šæœ¬]
    
    F --> G[è½®è¯¢ä»»åŠ¡çŠ¶æ€<br/>æ¯2ç§’æ£€æŸ¥ä¸€æ¬¡]
    
    G -->|å¤„ç†ä¸­| G
    G -->|å®Œæˆ| H[æ˜¾ç¤ºåˆ†é•œåˆ—è¡¨]
    G -->|å¤±è´¥| I[æ˜¾ç¤ºé”™è¯¯]
    
    H --> J[è‡ªåŠ¨è·³è½¬åˆ°<br/>ä¸“ä¸šç¼–è¾‘å™¨]
    
    style H fill:#c8e6c9
    style I fill:#ffcdd2
    style J fill:#c8e6c9
```

#### æ“ä½œæ­¥éª¤

1. **å¯åŠ¨åˆ†é•œæ‹†è§£**
   ```
   - åœ¨ Stage 2 é¡µé¢ç‚¹å‡»"AI è‡ªåŠ¨æ‹†åˆ†åˆ†é•œ"
   - é€‰æ‹©æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼ˆæ¨è GPT-4ï¼‰
   - ç‚¹å‡»"ç¡®è®¤"
   ```

2. **ç­‰å¾… AI å¤„ç†**
   ```
   - AI ä¼šåˆ†æå‰§æœ¬å†…å®¹
   - è¯†åˆ«åœºæ™¯å˜åŒ–å’Œå¯¹è¯èŠ‚ç‚¹
   - ç”Ÿæˆå®Œæ•´çš„åˆ†é•œè„šæœ¬
   - å¤„ç†æ—¶é—´å–å†³äºå‰§æœ¬é•¿åº¦ï¼ˆé€šå¸¸ 1-3 åˆ†é’Ÿï¼‰
   ```

3. **æŸ¥çœ‹ç”Ÿæˆç»“æœ**
   ```
   - ä»»åŠ¡å®Œæˆåï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºåˆ†é•œæ€»æ•°
   - ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"å¯é¢„è§ˆåˆ†é•œåˆ—è¡¨
   ```

4. **è‡ªåŠ¨è·³è½¬**
   ```
   - æ‹†è§£å®Œæˆåä¼šè‡ªåŠ¨è·³è½¬åˆ°"ä¸“ä¸šç¼–è¾‘å™¨"
   - æˆ–æ‰‹åŠ¨ç‚¹å‡»"è¿›å…¥ä¸“ä¸šç¼–è¾‘å™¨"æŒ‰é’®
   ```

#### åˆ†é•œæ•°æ®ç»“æ„

æ¯ä¸ªåˆ†é•œï¼ˆStoryboardï¼‰åŒ…å«ï¼š

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **sequence** | é•œå¤´åºå· | `1` |
| **shot_type** | é•œå¤´ç±»å‹ | `ç‰¹å†™`ã€`å…¨æ™¯`ã€`ä¸­æ™¯` |
| **movement** | è¿é•œæ–¹å¼ | `æ¨è¿›`ã€`æ‹‰è¿œ`ã€`å›ºå®š` |
| **action** | åŠ¨ä½œæè¿° | "ææ˜æ‰“å¼€æˆ¿é—¨ï¼Œç¯é¡¾å››å‘¨" |
| **dialogue** | å¯¹ç™½å†…å®¹ | "è¿™é‡Œå°±æ˜¯ä¼ è¯´ä¸­çš„è—ä¹¦é˜ï¼Ÿ" |
| **duration** | é•œå¤´æ—¶é•¿ï¼ˆç§’ï¼‰ | `5` |
| **image_prompt** | å›¾åƒç”Ÿæˆæç¤ºè¯ | è‡ªåŠ¨ç”Ÿæˆ |
| **video_prompt** | è§†é¢‘ç”Ÿæˆæç¤ºè¯ | è‡ªåŠ¨ç”Ÿæˆ |

#### è½®è¯¢æœºåˆ¶

- **è½®è¯¢é—´éš”**ï¼š2 ç§’
- **æ— è¶…æ—¶é™åˆ¶**ï¼šæŒç»­è½®è¯¢ç›´åˆ°å®Œæˆ
- **è¿›åº¦æ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºæ‹†è§£è¿›åº¦

### Stage 3: ä¸“ä¸šç¼–è¾‘å™¨

è¿™æ˜¯æœ€ç»ˆçš„è§†é¢‘åˆ¶ä½œé˜¶æ®µï¼Œæä¾›å¯è§†åŒ–çš„æ—¶é—´è½´ç¼–è¾‘å™¨ã€‚

```mermaid
graph TB
    A[è¿›å…¥ä¸“ä¸šç¼–è¾‘å™¨] --> B[æŸ¥çœ‹åˆ†é•œåˆ—è¡¨]
    
    B --> C[ç¼–è¾‘åˆ†é•œå†…å®¹]
    C --> D[ç”Ÿæˆåˆ†é•œå›¾åƒ]
    C --> E[ç”Ÿæˆåˆ†é•œè§†é¢‘]
    
    D & E --> F[æ·»åŠ åˆ°æ—¶é—´è½´]
    
    F --> G[è°ƒæ•´æ—¶é—´è½´]
    G --> H[è®¾ç½®è½¬åœºæ•ˆæœ]
    G --> I[è°ƒæ•´æ’­æ”¾é¡ºåº]
    
    H & I --> J[åˆå¹¶è§†é¢‘]
    J --> K[è½®è¯¢åˆå¹¶ä»»åŠ¡]
    
    K -->|å¤„ç†ä¸­| K
    K -->|å®Œæˆ| L[ä¸‹è½½æœ€ç»ˆè§†é¢‘]
    
    style L fill:#c8e6c9
```

#### ç•Œé¢å¸ƒå±€

```mermaid
graph TB
    subgraph "ä¸“ä¸šç¼–è¾‘å™¨ç•Œé¢"
        A[é¡¶éƒ¨å·¥å…·æ ]
        B[å·¦ä¾§åˆ†é•œåˆ—è¡¨<br/>å¯æ»šåŠ¨]
        C[ä¸­é—´é¢„è§ˆåŒº]
        D[å³ä¾§å±æ€§é¢æ¿]
        E[åº•éƒ¨æ—¶é—´è½´]
    end
    
    A --> |ä¿å­˜/å¯¼å‡º| F[æ“ä½œæŒ‰é’®]
    B --> |æ‹–æ‹½| E
    C --> |æ’­æ”¾é¢„è§ˆ| G[è§†é¢‘æ’­æ”¾å™¨]
    D --> |ç¼–è¾‘| H[åˆ†é•œå±æ€§]
    E --> |åˆå¹¶| I[æœ€ç»ˆè§†é¢‘]
```

#### æ“ä½œæ­¥éª¤

##### 1. ç¼–è¾‘åˆ†é•œ

```
- ç‚¹å‡»å·¦ä¾§åˆ†é•œå¡ç‰‡
- åœ¨å³ä¾§é¢æ¿ç¼–è¾‘å†…å®¹ï¼š
  * æ ‡é¢˜
  * é•œå¤´ç±»å‹ï¼ˆç‰¹å†™/ä¸­æ™¯/å…¨æ™¯/è¿œæ™¯ï¼‰
  * è¿é•œæ–¹å¼ï¼ˆæ¨è¿›/æ‹‰è¿œ/æ‘‡ç§»/å›ºå®šï¼‰
  * åŠ¨ä½œæè¿°
  * å¯¹ç™½å†…å®¹
  * æ—¶é•¿ï¼ˆç§’ï¼‰
  * å›¾åƒæç¤ºè¯
  * è§†é¢‘æç¤ºè¯
- ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
```

##### 2. ç”Ÿæˆåˆ†é•œå›¾åƒ

```
åˆ†é•œæ”¯æŒå››ç§ç”»é¢ç±»å‹ï¼š
1. èµ·å§‹å¸§ï¼šè§†é¢‘å¼€å§‹ç”»é¢
2. ç»“æŸå¸§ï¼šè§†é¢‘ç»“æŸç”»é¢
3. å‚è€ƒå›¾ï¼šç”¨äºè§†é¢‘ç”Ÿæˆçš„å‚è€ƒ
4. å®šæ ¼ç”»é¢ï¼šè§†é¢‘çš„å›ºå®šç”»é¢

æ“ä½œï¼š
- é€‰æ‹©ç”»é¢ç±»å‹
- ç‚¹å‡»"ç”Ÿæˆå›¾åƒ"æŒ‰é’®
- é€‰æ‹©å›¾åƒæ¨¡å‹
- ç­‰å¾…ç”Ÿæˆå®Œæˆ
```

##### 3. ç”Ÿæˆåˆ†é•œè§†é¢‘

```
- ç¡®ä¿å·²æœ‰èµ·å§‹å¸§æˆ–å‚è€ƒå›¾
- ç‚¹å‡»"ç”Ÿæˆè§†é¢‘"æŒ‰é’®
- é€‰æ‹©è§†é¢‘ç”Ÿæˆæ¨¡å‹
- è§†é¢‘ä¼šæ ¹æ®æç¤ºè¯è‡ªåŠ¨ç”Ÿæˆ
- è½®è¯¢é—´éš”ï¼š5ç§’
- é¢„è®¡æ—¶é•¿ï¼š5-15åˆ†é’Ÿï¼ˆå–å†³äºæœåŠ¡å•†ï¼‰
```

##### 4. ç®¡ç†æ—¶é—´è½´

```mermaid
graph LR
    A[åˆ†é•œåˆ—è¡¨] -->|æ‹–æ‹½| B[æ—¶é—´è½´]
    B --> C[è°ƒæ•´é¡ºåº]
    B --> D[è®¾ç½®è½¬åœº]
    B --> E[é¢„è§ˆæ’­æ”¾]
    
    C & D & E --> F[æœ€ç»ˆåºåˆ—]
```

æ“ä½œï¼š
- **æ·»åŠ åˆ°æ—¶é—´è½´**ï¼šæ‹–æ‹½åˆ†é•œå¡ç‰‡åˆ°æ—¶é—´è½´åŒºåŸŸ
- **è°ƒæ•´é¡ºåº**ï¼šåœ¨æ—¶é—´è½´å†…æ‹–æ‹½é‡æ–°æ’åº
- **è®¾ç½®è½¬åœº**ï¼šç‚¹å‡»æ—¶é—´è½´ç‰‡æ®µé—´çš„è¿æ¥ç‚¹
  - æ·¡å…¥æ·¡å‡ºï¼ˆFadeï¼‰
  - åˆ‡æ¢ï¼ˆCutï¼‰
  - æº¶è§£ï¼ˆDissolveï¼‰
- **é¢„è§ˆæ’­æ”¾**ï¼šç‚¹å‡»æ’­æ”¾æŒ‰é’®é¢„è§ˆæ•ˆæœ

##### 5. åˆå¹¶æœ€ç»ˆè§†é¢‘

```
- ç¡®è®¤æ—¶é—´è½´å†…æ‰€æœ‰ç‰‡æ®µå°±ç»ª
- ç‚¹å‡»"åˆå¹¶è§†é¢‘"æŒ‰é’®
- FFmpeg ä¼šåœ¨åå°åˆå¹¶æ‰€æœ‰ç‰‡æ®µ
- åº”ç”¨è½¬åœºæ•ˆæœå’ŒéŸ³é¢‘
- è½®è¯¢åˆå¹¶çŠ¶æ€ï¼ˆæ¯3ç§’æ£€æŸ¥ï¼‰
- åˆå¹¶å®Œæˆåæ˜¾ç¤ºä¸‹è½½æŒ‰é’®
```

#### è§†é¢‘ç”Ÿæˆæµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant UI as ç¼–è¾‘å™¨ç•Œé¢
    participant API as åç«¯API
    participant AI as AIè§†é¢‘æœåŠ¡
    participant FFmpeg as FFmpeg
    
    User->>UI: ç‚¹å‡»ç”Ÿæˆè§†é¢‘
    UI->>API: æäº¤è§†é¢‘ç”Ÿæˆè¯·æ±‚
    API->>AI: è°ƒç”¨è§†é¢‘ç”ŸæˆAPI
    AI-->>API: è¿”å›ä»»åŠ¡ID
    API-->>UI: è¿”å›ä»»åŠ¡ID
    
    loop æ¯5ç§’è½®è¯¢
        UI->>API: æŸ¥è¯¢è§†é¢‘çŠ¶æ€
        API->>AI: æŸ¥è¯¢ä»»åŠ¡è¿›åº¦
        AI-->>API: è¿”å›çŠ¶æ€+è¿›åº¦
        API-->>UI: è¿”å›çŠ¶æ€
    end
    
    AI->>API: è§†é¢‘ç”Ÿæˆå®Œæˆ
    API->>API: ä¸‹è½½å¹¶ç¼“å­˜è§†é¢‘
    
    User->>UI: æ·»åŠ åˆ°æ—¶é—´è½´
    User->>UI: ç‚¹å‡»åˆå¹¶è§†é¢‘
    
    UI->>API: æäº¤åˆå¹¶è¯·æ±‚
    API->>FFmpeg: æ‰§è¡Œåˆå¹¶å‘½ä»¤
    FFmpeg-->>API: åˆå¹¶å®Œæˆ
    API-->>UI: è¿”å›æœ€ç»ˆè§†é¢‘URL
    
    User->>UI: ä¸‹è½½è§†é¢‘
```

#### é«˜çº§åŠŸèƒ½

**æ‰¹é‡ç”Ÿæˆè§†é¢‘**
```
- å‹¾é€‰å¤šä¸ªåˆ†é•œ
- ç‚¹å‡»"æ‰¹é‡ç”Ÿæˆè§†é¢‘"
- æ‰€æœ‰é€‰ä¸­åˆ†é•œä¼šä¾æ¬¡ç”Ÿæˆ
- å¯åœ¨åå°ç»§ç»­ç¼–è¾‘
```

**å‚è€ƒå›¾ä¸Šä¼ **
```
- ç‚¹å‡»åˆ†é•œå¡ç‰‡
- é€‰æ‹©"å‚è€ƒå›¾"ç±»å‹
- ç‚¹å‡»"ä¸Šä¼ å›¾åƒ"
- é€‰æ‹©æœ¬åœ°å›¾ç‰‡æ–‡ä»¶
- è¯¥å›¾ç‰‡å°†ç”¨äºè§†é¢‘ç”Ÿæˆå‚è€ƒ
```

**è§†é¢‘åº“åŠŸèƒ½**
```
- æŸ¥çœ‹æ‰€æœ‰å·²ç”Ÿæˆçš„è§†é¢‘
- æŒ‰åˆ†é•œç­›é€‰
- é‡æ–°ä½¿ç”¨å·²æœ‰è§†é¢‘
- åˆ é™¤æ— ç”¨è§†é¢‘
```

## æ•°æ®æ¨¡å‹å…³ç³»

```mermaid
erDiagram
    DRAMA ||--o{ EPISODE : contains
    DRAMA ||--o{ CHARACTER : has
    DRAMA ||--o{ SCENE : has
    
    EPISODE ||--o{ STORYBOARD : contains
    
    STORYBOARD ||--o| VIDEO_GENERATION : generates
    STORYBOARD ||--o{ IMAGE_GENERATION : generates
    
    DRAMA {
        uint id PK
        string title
        string description
        string script
        timestamp created_at
        timestamp updated_at
    }
    
    EPISODE {
        uint id PK
        uint drama_id FK
        int episode_number
        string title
        string content
        string status
    }
    
    CHARACTER {
        uint id PK
        uint drama_id FK
        string name
        string description
        string image_url
        string gender
    }
    
    SCENE {
        uint id PK
        uint drama_id FK
        string description
        string location
        string image_url
    }
    
    STORYBOARD {
        uint id PK
        uint episode_id FK
        int sequence
        string shot_type
        string description
        string image_prompt
        string video_prompt
    }
    
    VIDEO_GENERATION {
        uint id PK
        uint storyboard_id FK
        string status
        string task_id
        string video_url
        string provider
        string model
    }
    
    IMAGE_GENERATION {
        uint id PK
        string status
        string image_url
        string prompt
        string frame_type
        string provider
    }
```

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### å®‰è£…ä¸éƒ¨ç½²

#### Q1: Docker å®¹å™¨å¦‚ä½•è®¿é—®ä¸»æœºçš„ Ollamaï¼Ÿ

**é—®é¢˜**ï¼šä½¿ç”¨ Docker éƒ¨ç½²æ—¶ï¼Œå®¹å™¨å†…æ— æ³•è®¿é—®ä¸»æœºä¸Šè¿è¡Œçš„ Ollama æœåŠ¡ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. ç¡®ä¿ Ollama ç›‘å¬æ‰€æœ‰æ¥å£
export OLLAMA_HOST=0.0.0.0:11434 && ollama serve

# 2. åœ¨å®¹å™¨å†…ä½¿ç”¨ç‰¹æ®ŠåŸŸå
# Base URL é…ç½®ä¸ºï¼šhttp://host.docker.internal:11434/v1

# 3. Linux ç”¨æˆ·éœ€è¦æ·»åŠ é¢å¤–å‚æ•°
docker run --add-host=host.docker.internal:host-gateway ...
```

```mermaid
graph TB
    A[ä¸»æœº Ollama<br/>0.0.0.0:11434] 
    B[Dockerå®¹å™¨<br/>ç«å®çŸ­å‰§]
    
    B -->|host.docker.internal:11434| A
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
```

**AI é…ç½®ç•Œé¢è®¾ç½®**ï¼š
- Base URL: `http://host.docker.internal:11434/v1`
- Provider: `openai`ï¼ˆOllama å…¼å®¹ OpenAI APIï¼‰
- Model: `qwen2.5:latest`ï¼ˆæˆ–å…¶ä»–å·²æ‹‰å–çš„æ¨¡å‹ï¼‰

#### Q2: FFmpeg æœªå®‰è£…æˆ–æ‰¾ä¸åˆ°ï¼Ÿ

**é—®é¢˜**ï¼šå¯åŠ¨æ—¶æç¤º `FFmpeg not found`ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt update && sudo apt install ffmpeg

# éªŒè¯å®‰è£…
ffmpeg -version
```

**Docker ç”¨æˆ·æ— éœ€æ‰‹åŠ¨å®‰è£…**ï¼Œé•œåƒå·²åŒ…å« FFmpegã€‚

#### Q3: å‰ç«¯æ— æ³•è¿æ¥åç«¯ APIï¼Ÿ

**é—®é¢˜**ï¼šæµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º CORS é”™è¯¯æˆ–è¿æ¥æ‹’ç»ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ**
   ```bash
   curl http://localhost:5678/health
   ```

2. **æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®**
   - é»˜è®¤ç«¯å£ï¼š`5678`
   - ä¿®æ”¹é…ç½®ï¼š`configs/config.yaml` ä¸­çš„ `server.port`

3. **å¼€å‘æ¨¡å¼ä»£ç†é…ç½®**
   - å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š`http://localhost:3012`
   - ä»£ç†é…ç½®æ–‡ä»¶ï¼š`web/vite.config.ts`
   - ç¡®ä¿ `proxy` ç›®æ ‡æŒ‡å‘ `http://localhost:5678`

#### Q4: SQLite å†™å…¥æƒé™é”™è¯¯ï¼Ÿ

**é—®é¢˜**ï¼šæ—¥å¿—æ˜¾ç¤º `attempt to write a readonly database`ã€‚

**åŸå› **ï¼šæ•°æ®åº“æ–‡ä»¶æˆ–ç›®å½•æƒé™ä¸è¶³ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥å½“å‰è¿è¡Œç”¨æˆ·
sudo systemctl status huobao-drama | grep "Main PID"
ps aux | grep huobao-drama

# 2. ä¿®å¤æƒé™ï¼ˆå°† YOUR_USER æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·ï¼‰
sudo chown -R YOUR_USER:YOUR_USER /opt/huobao-drama/data
sudo chmod -R 755 /opt/huobao-drama/data

# 3. éªŒè¯æƒé™
ls -la /opt/huobao-drama/data

# 4. é‡å¯æœåŠ¡
sudo systemctl restart huobao-drama
```

**Docker éƒ¨ç½²è‡ªåŠ¨å¤„ç†æƒé™**ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚

### ä½¿ç”¨é—®é¢˜

#### Q5: å›¾åƒç”Ÿæˆä¸€ç›´æ˜¾ç¤º"å¤„ç†ä¸­"ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. AI æœåŠ¡é…ç½®é”™è¯¯
2. API å¯†é’¥æ— æ•ˆ
3. ä½™é¢ä¸è¶³
4. ç½‘ç»œè¿æ¥é—®é¢˜

**æ’æŸ¥æ­¥éª¤**ï¼š

```mermaid
graph TB
    A[å›¾åƒå¤„ç†ä¸­] --> B{æ£€æŸ¥é…ç½®}
    B -->|é…ç½®é”™è¯¯| C[é‡æ–°é…ç½®AIæœåŠ¡]
    B -->|é…ç½®æ­£ç¡®| D{æµ‹è¯•è¿æ¥}
    
    D -->|è¿æ¥å¤±è´¥| E[æ£€æŸ¥ç½‘ç»œ/å¯†é’¥]
    D -->|è¿æ¥æˆåŠŸ| F{æŸ¥çœ‹åç«¯æ—¥å¿—}
    
    F --> G[docker logs -f huobao-drama]
    G --> H{é”™è¯¯ä¿¡æ¯}
    
    H -->|ä½™é¢ä¸è¶³| I[å……å€¼APIè´¦æˆ·]
    H -->|è¶…æ—¶| J[ç­‰å¾…æˆ–é‡è¯•]
    H -->|å…¶ä»–é”™è¯¯| K[è”ç³»æŠ€æœ¯æ”¯æŒ]
    
    style C fill:#fff3e0
    style I fill:#ffcdd2
```

**æ“ä½œ**ï¼š
1. è¿›å…¥ AI é…ç½®é¡µé¢
2. ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
3. æŸ¥çœ‹è¿”å›çš„é”™è¯¯ä¿¡æ¯
4. æ ¹æ®é”™è¯¯ä¿¡æ¯è°ƒæ•´é…ç½®

#### Q6: è§†é¢‘åˆå¹¶å¤±è´¥ï¼Ÿ

**é—®é¢˜**ï¼šç‚¹å‡»"åˆå¹¶è§†é¢‘"åä»»åŠ¡å¤±è´¥ã€‚

**å¯èƒ½åŸå› **ï¼š
1. FFmpeg æœªæ­£ç¡®å®‰è£…
2. è§†é¢‘æ–‡ä»¶æŸå
3. ç£ç›˜ç©ºé—´ä¸è¶³
4. æ–‡ä»¶è·¯å¾„æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# 1. æ£€æŸ¥ FFmpeg
ffmpeg -version

# 2. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# 3. æ£€æŸ¥æ—¥å¿—
# Docker:
docker logs huobao-drama | grep -i "error"

# äºŒè¿›åˆ¶:
tail -f logs/app.log | grep -i "error"

# 4. æ‰‹åŠ¨æµ‹è¯• FFmpeg
ffmpeg -i test.mp4 -c copy output.mp4
```

#### Q7: åˆ†é•œæ‹†è§£ç»“æœä¸ç†æƒ³ï¼Ÿ

**é—®é¢˜**ï¼šAI æ‹†è§£çš„åˆ†é•œè„šæœ¬ä¸ç¬¦åˆé¢„æœŸã€‚

**ä¼˜åŒ–å»ºè®®**ï¼š

1. **ä¼˜åŒ–å‰§æœ¬æ ¼å¼**
   ```
   âœ… æ¨èæ ¼å¼ï¼š
   åœºæ™¯ï¼šçš‡å®«å¤§æ®¿ - ç™½å¤©
   äººç‰©ï¼šææ˜ï¼ˆç©¿ç€çŠ¶å…ƒæœï¼‰
   åŠ¨ä½œï¼šææ˜è·ªæ‹œçš‡å¸ï¼Œæ¥è¿‡åœ£æ—¨
   å¯¹ç™½ï¼šææ˜ï¼š"è°¢ä¸»éš†æ©ï¼"
   
   âŒ é¿å…æ ¼å¼ï¼š
   ææ˜æ¥åˆ°çš‡å®«è§çš‡å¸å¹¶æ¥è¿‡åœ£æ—¨è¯´è°¢ä¸»éš†æ©
   ```

2. **è°ƒæ•´ AI æ¨¡å‹**
   - æ¨èä½¿ç”¨ GPT-4 æˆ–æ›´é«˜çº§æ¨¡å‹
   - é¿å…ä½¿ç”¨ GPT-3.5 ç­‰è¾ƒå¼±æ¨¡å‹

3. **æ‰‹åŠ¨è°ƒæ•´**
   - åœ¨ä¸“ä¸šç¼–è¾‘å™¨ä¸­ä¿®æ”¹åˆ†é•œå†…å®¹
   - æ·»åŠ æˆ–åˆ é™¤åˆ†é•œ
   - è°ƒæ•´é•œå¤´ç±»å‹å’Œæ—¶é•¿

#### Q8: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

**æ–¹æ³• 1ï¼šDocker æ•°æ®å·å¤‡ä»½**

```bash
# æŸ¥çœ‹æ•°æ®å·ä½ç½®
docker volume inspect huobao-data

# åˆ›å»ºå¤‡ä»½
docker run --rm \
  -v huobao-data:/data \
  -v $(pwd):/backup \
  alpine tar czf /backup/huobao-backup-$(date +%Y%m%d).tar.gz /data

# æ¢å¤å¤‡ä»½
docker run --rm \
  -v huobao-data:/data \
  -v $(pwd):/backup \
  alpine sh -c "cd /data && tar xzf /backup/huobao-backup-YYYYMMDD.tar.gz --strip 1"
```

**æ–¹æ³• 2ï¼šç›´æ¥å¤åˆ¶æ•°æ®åº“**

```bash
# å¤‡ä»½
cp ./data/drama_generator.db ./backups/drama_generator.db.backup

# æ¢å¤
cp ./backups/drama_generator.db.backup ./data/drama_generator.db
```

**å¤‡ä»½å†…å®¹åŒ…æ‹¬**ï¼š
- SQLite æ•°æ®åº“ï¼ˆå‰§æœ¬ã€è§’è‰²ã€åœºæ™¯ã€åˆ†é•œç­‰ï¼‰
- å­˜å‚¨æ–‡ä»¶ï¼ˆç”Ÿæˆçš„å›¾åƒå’Œè§†é¢‘ï¼‰

**æ¨èå¤‡ä»½é¢‘ç‡**ï¼šæ¯å¤©æˆ–æ¯å‘¨

## é«˜çº§é…ç½®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # ä¸»åº”ç”¨ä»£ç†
    location / {
        proxy_pass http://localhost:5678;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket æ”¯æŒï¼ˆå¦‚éœ€è¦ï¼‰
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # é™æ€æ–‡ä»¶ç›´æ¥è®¿é—®
    location /static/ {
        alias /opt/huobao-drama/data/storage/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # HTTPS é…ç½®ï¼ˆæ¨èï¼‰
    # listen 443 ssl http2;
    # ssl_certificate /path/to/cert.pem;
    # ssl_certificate_key /path/to/key.pem;
}
```

#### systemd æœåŠ¡é…ç½®

```ini
# /etc/systemd/system/huobao-drama.service
[Unit]
Description=Huobao Drama Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/huobao-drama
ExecStart=/opt/huobao-drama/huobao-drama
Restart=on-failure
RestartSec=10

# ç¯å¢ƒå˜é‡
Environment="GIN_MODE=release"

# èµ„æºé™åˆ¶
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
```

**å¯åŠ¨æœåŠ¡**ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable huobao-drama
sudo systemctl start huobao-drama
sudo systemctl status huobao-drama
```

### æ€§èƒ½ä¼˜åŒ–

#### æ•°æ®åº“ä¼˜åŒ–

SQLite é»˜è®¤é…ç½®å·²ä¼˜åŒ–ï¼Œä½†å¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼š

```yaml
# configs/config.yaml
database:
  type: sqlite
  path: ./data/drama_generator.db
  max_idle: 10        # æœ€å¤§ç©ºé—²è¿æ¥
  max_open: 100       # æœ€å¤§æ‰“å¼€è¿æ¥
  conn_max_lifetime: 3600  # è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰
```

#### å­˜å‚¨ä¼˜åŒ–

**æœ¬åœ°å­˜å‚¨é…ç½®**ï¼š

```yaml
storage:
  type: local
  local_path: ./data/storage
  base_url: http://your-domain.com/static
  max_file_size: 104857600  # 100MB
  allowed_types:
    - image/jpeg
    - image/png
    - video/mp4
```

**å®šæœŸæ¸…ç†**ï¼š

```bash
# æ¸…ç†å¤±è´¥çš„ç”Ÿæˆä»»åŠ¡æ–‡ä»¶
find ./data/storage -type f -name "*.tmp" -mtime +7 -delete

# æ¸…ç†å­¤ç«‹æ–‡ä»¶ï¼ˆæ•°æ®åº“ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼‰
# éœ€è¦è‡ªå®šä¹‰è„šæœ¬
```

#### è§†é¢‘å¤„ç†ä¼˜åŒ–

**FFmpeg å‚æ•°è°ƒä¼˜**ï¼š

- **ç¡¬ä»¶åŠ é€Ÿ**ï¼ˆå¦‚æœ‰ GPUï¼‰ï¼š
  ```go
  // åœ¨ä»£ç ä¸­å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ
  "-hwaccel", "cuda"  // NVIDIA GPU
  "-hwaccel", "videotoolbox"  // macOS
  ```

- **å¹¶å‘å¤„ç†**ï¼š
  - é™åˆ¶åŒæ—¶ç”Ÿæˆçš„è§†é¢‘æ•°é‡
  - é¿å… CPU è¿‡è½½

### ç›‘æ§ä¸æ—¥å¿—

#### æ—¥å¿—é…ç½®

```yaml
# configs/config.yaml
log:
  level: info        # debug, info, warn, error
  format: json       # json æˆ– text
  output: stdout     # stdout æˆ–æ–‡ä»¶è·¯å¾„
  file_path: ./logs/app.log
  max_size: 100      # MB
  max_backups: 3     # ä¿ç•™æ—¥å¿—æ–‡ä»¶æ•°
  max_age: 28        # å¤©
```

#### å¥åº·æ£€æŸ¥

```bash
# æ‰‹åŠ¨æ£€æŸ¥
curl http://localhost:5678/health

# ä½¿ç”¨ç›‘æ§å·¥å…·
# Prometheus + Grafana
# å¯æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡
```

#### Docker æ—¥å¿—

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker logs -f huobao-drama

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
docker logs --tail 100 huobao-drama

# å¯¼å‡ºæ—¥å¿—
docker logs huobao-drama > huobao-drama.log 2>&1
```

## æœ€ä½³å®è·µ

### å‰§æœ¬åˆ›ä½œå»ºè®®

1. **æ˜ç¡®åœºæ™¯åˆ’åˆ†**
   - æ¯ä¸ªåœºæ™¯ç‹¬ç«‹æ®µè½
   - æ ‡æ³¨æ—¶é—´å’Œåœ°ç‚¹
   - æ¸…æ™°çš„åœºæ™¯è½¬æ¢

2. **è§’è‰²æè¿°è¯¦ç»†**
   - å¤–è²Œç‰¹å¾ï¼ˆå‘å‹ã€æœè£…ã€å¹´é¾„ï¼‰
   - æ€§æ ¼ç‰¹ç‚¹
   - å…³é”®é“å…·

3. **å¯¹ç™½ç®€æ´**
   - æ¯å¥å¯¹ç™½ç‹¬ç«‹ä¸€è¡Œ
   - é¿å…è¿‡é•¿ç‹¬ç™½
   - æ ‡æ³¨è¯´è¯äºº

### å›¾åƒç”ŸæˆæŠ€å·§

1. **ä¼˜åŒ–æç¤ºè¯**
   - åŒ…å«é£æ ¼æè¿°ï¼ˆå¦‚ï¼š"åŠ¨æ¼«é£æ ¼"ã€"å†™å®é£æ ¼"ï¼‰
   - æŒ‡å®šå…‰çº¿ï¼ˆ"æŸ”å’Œå…‰çº¿"ã€"æˆå‰§æ€§å…‰å½±"ï¼‰
   - æ·»åŠ æ°›å›´è¯ï¼ˆ"æ¸©é¦¨çš„"ã€"ç´§å¼ çš„"ï¼‰

2. **ä¸€è‡´æ€§æ§åˆ¶**
   - ä¸ºåŒä¸€è§’è‰²ä½¿ç”¨ç›¸ä¼¼çš„æç¤ºè¯ç»“æ„
   - ä¿æŒé£æ ¼ç»Ÿä¸€
   - å¯ä½¿ç”¨å‚è€ƒå›¾åŠŸèƒ½

3. **æ‰¹é‡ç”Ÿæˆ**
   - åŒç±»å‹ç´ ææ‰¹é‡ç”Ÿæˆ
   - èŠ‚çœæ—¶é—´
   - ä¾¿äºç»Ÿä¸€è°ƒæ•´

### è§†é¢‘åˆ¶ä½œæµç¨‹

```mermaid
graph TB
    A[å®Œæ•´å‰§æœ¬å‡†å¤‡] --> B[è§’è‰²åœºæ™¯è®¾è®¡]
    B --> C[å›¾åƒç´ æç”Ÿæˆ]
    C --> D[åˆ†é•œè„šæœ¬æ‹†è§£]
    D --> E[åˆ†é•œå›¾åƒç”Ÿæˆ]
    E --> F[åˆ†é•œè§†é¢‘ç”Ÿæˆ]
    F --> G[æ—¶é—´è½´ç¼–è¾‘]
    G --> H[é¢„è§ˆè°ƒæ•´]
    H --> I[æœ€ç»ˆåˆæˆ]
    
    style A fill:#e3f2fd
    style E fill:#f3e5f5
    style I fill:#c8e6c9
```

**æ¨èå·¥ä½œé¡ºåº**ï¼š
1. å…ˆå®Œæˆæ‰€æœ‰å›¾åƒç”Ÿæˆ
2. å†è¿›è¡Œåˆ†é•œæ‹†è§£
3. æ‰¹é‡ç”Ÿæˆåˆ†é•œè§†é¢‘
4. æœ€åç»Ÿä¸€ç¼–è¾‘æ—¶é—´è½´

### æˆæœ¬æ§åˆ¶

1. **API ä½¿ç”¨ä¼˜åŒ–**
   - ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤ç”Ÿæˆ
   - é€‰æ‹©æ€§ä»·æ¯”é«˜çš„æ¨¡å‹
   - æ‰¹é‡ç”Ÿæˆé™ä½å•ä»·

2. **å­˜å‚¨ç®¡ç†**
   - å®šæœŸæ¸…ç†æ— ç”¨ç´ æ
   - å‹ç¼©å­˜å‚¨å†å²é¡¹ç›®
   - ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆå¯é€‰ï¼‰

3. **æ¨¡å‹é€‰æ‹©**
   ```
   æ–‡æœ¬ç”Ÿæˆï¼š
   - é¢„ç®—å……è¶³ï¼šGPT-4
   - æ€§ä»·æ¯”ï¼šGPT-3.5 Turbo
   - æœ¬åœ°åŒ–ï¼šOllama + Qwen
   
   å›¾åƒç”Ÿæˆï¼š
   - é«˜è´¨é‡ï¼šDALL-E-3
   - å¿«é€Ÿè¿­ä»£ï¼šStable Diffusion
   - æˆæœ¬ä¼˜å…ˆï¼šMidjourney
   
   è§†é¢‘ç”Ÿæˆï¼š
   - å•†ä¸šçº§ï¼šOpenAI Sora
   - ç¨³å®šæ€§ï¼šè±†åŒ… Seedance
   - å®éªŒæ€§ï¼šRunway Gen-2
   ```

## ç¤¾åŒºä¸æ”¯æŒ

### å®˜æ–¹èµ„æº

- ğŸ  **GitHub ä»“åº“**ï¼š[https://github.com/chatfire-AI/huobao-drama](https://github.com/chatfire-AI/huobao-drama)
- ğŸ“š **æŠ€æœ¯æ–‡æ¡£**ï¼š[https://deepwiki.com/chatfire-AI/huobao-drama](https://deepwiki.com/chatfire-AI/huobao-drama)
- ğŸ“§ **è”ç³»é‚®ç®±**ï¼š18550175439@163.com

### é—®é¢˜åé¦ˆ

**æäº¤ Issue æ—¶è¯·åŒ…å«**ï¼š
1. é—®é¢˜æè¿°
2. å¤ç°æ­¥éª¤
3. ç³»ç»Ÿç¯å¢ƒï¼ˆOSã€Dockerç‰ˆæœ¬ç­‰ï¼‰
4. æ—¥å¿—ç‰‡æ®µ
5. æˆªå›¾ï¼ˆå¦‚æœ‰ï¼‰

### è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç æˆ–æäº¤ Pull Requestï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆ`git checkout -b feature/AmazingFeature`ï¼‰
3. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add some AmazingFeature'`ï¼‰
4. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/AmazingFeature`ï¼‰
5. åˆ›å»º Pull Request

## æ›´æ–°æ—¥å¿—

### v1.0.4 (2026-01-27)

#### ğŸš€ é‡å¤§æ›´æ–°
- âœ¨ å¼•å…¥æœ¬åœ°å­˜å‚¨ç­–ç•¥ï¼Œç¼“å­˜ç”Ÿæˆå†…å®¹ï¼Œç¼“è§£å¤–éƒ¨èµ„æºé“¾æ¥è¿‡æœŸé£é™©
- ğŸ–¼ï¸ å®ç°å‚è€ƒå›¾ Base64 ç¼–ç ä¼ è¾“
- ğŸ› ä¿®å¤åˆ‡æ¢åˆ†é•œæ—¶é•œå¤´å›¾åƒæç¤ºè¯çŠ¶æ€æœªé‡ç½®çš„é—®é¢˜
- ğŸ› ä¿®å¤æ·»åŠ åº“è§†é¢‘æ—¶è§†é¢‘æ—¶é•¿æ˜¾ç¤ºä¸º 0 çš„é—®é¢˜
- âœ¨ æ·»åŠ åœºæ™¯è¿ç§»åˆ°å‰§é›†åŠŸèƒ½

#### å†å²æ•°æ®è¿ç§»
- ğŸ“¦ æ·»åŠ è¿ç§»è„šæœ¬å¤„ç†å†å²æ•°æ®ï¼ˆè¯¦è§ `MIGRATE_README.md`ï¼‰

### v1.0.3 (2026-01-16)

#### ğŸš€ é‡å¤§æ›´æ–°
- ğŸ”§ çº¯ Go SQLite é©±åŠ¨ï¼ˆ`modernc.org/sqlite`ï¼‰ï¼Œæ”¯æŒ `CGO_ENABLED=0` è·¨å¹³å°ç¼–è¯‘
- âš¡ ä¼˜åŒ–å¹¶å‘æ€§èƒ½ï¼ˆWAL æ¨¡å¼ï¼‰ï¼Œè§£å†³"database is locked"é”™è¯¯
- ğŸ³ Docker è·¨å¹³å°æ”¯æŒ `host.docker.internal` è®¿é—®ä¸»æœºæœåŠ¡
- ğŸ“ ç²¾ç®€æ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—

### v1.0.2 (2026-01-14)

#### ğŸ› Bug ä¿®å¤ / ğŸ”§ æ”¹è¿›
- ğŸ› ä¿®å¤è§†é¢‘ç”Ÿæˆ API å“åº”è§£æé—®é¢˜
- âœ¨ æ·»åŠ  OpenAI Sora è§†é¢‘ç«¯ç‚¹é…ç½®
- ğŸ”§ ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ç»“è¯­

ç«å®çŸ­å‰§é€šè¿‡ AI æŠ€æœ¯æå¤§åœ°é™ä½äº†çŸ­å‰§åˆ¶ä½œçš„é—¨æ§›ï¼Œè®©ä¸ªäººåˆ›ä½œè€…ä¹Ÿèƒ½å¿«é€Ÿäº§å‡ºä¸“ä¸šçº§çš„çŸ­å‰§ä½œå“ã€‚æ— è®ºä½ æ˜¯å†…å®¹åˆ›ä½œè€…ã€è¥é”€äººå‘˜ï¼Œè¿˜æ˜¯æŠ€æœ¯çˆ±å¥½è€…ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå¹³å°å®ç°è‡ªå·±çš„åˆ›æ„æƒ³æ³•ã€‚

```mermaid
graph LR
    A[åˆ›æ„çµæ„Ÿ] --> B[AIå‰§æœ¬]
    B --> C[è§’è‰²åœºæ™¯]
    C --> D[åˆ†é•œè„šæœ¬]
    D --> E[è§†é¢‘ç´ æ]
    E --> F[æˆå“çŸ­å‰§]
    
    style A fill:#e3f2fd
    style F fill:#c8e6c9
```

å¼€å§‹ä½ çš„çŸ­å‰§åˆ›ä½œä¹‹æ—…å§ï¼ğŸ¬

---

**é¡¹ç›®åœ°å€**ï¼š<https://github.com/chatfire-AI/huobao-drama>

**æŠ€æœ¯æ”¯æŒ**ï¼šå¦‚æœ‰é—®é¢˜æ¬¢è¿æäº¤ Issue æˆ–å‘é€é‚®ä»¶è‡³ 18550175439@163.com

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª Starï¼**

